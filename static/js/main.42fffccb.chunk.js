(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{19:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__XUIay",dialogsItems:"Dialogs_dialogsItems__3HR55",active:"Dialogs_active__ICjGL",messages:"Dialogs_messages__36TXD",message:"Dialogs_message__2DeW4"}},29:function(e,t,s){e.exports={userPhoto:"Users_userPhoto__XybWM",selectedPage:"Users_selectedPage__2bVJj"}},30:function(e,t,s){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__w7-vB"}},31:function(e,t,s){e.exports={postsBlock:"MyPosts_postsBlock__yxqJL",posts:"MyPosts_posts__2cETP"}},32:function(e,t,s){e.exports={header:"Header_header__3fFoF",loginBlock:"Header_loginBlock__1Wask"}},45:function(e,t,s){e.exports={content:"Post_content__3LncI",item:"Post_item__1awDx"}},52:function(e,t,s){},53:function(e,t,s){},6:function(e,t,s){e.exports={nav:"Navbar_nav__3SeaK",item:"Navbar_item__1VkP1",activeLink:"Navbar_activeLink__1NHh2"}},77:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(1),c=s.n(i),a=s(22),r=s.n(a),o=(s(52),s(53),s(6)),u=s.n(o),l=s(5),j=function(){return Object(n.jsxs)("nav",{className:u.a.nav,children:[Object(n.jsx)("div",{className:u.a.item,children:Object(n.jsx)(l.b,{to:"/profile",activeClassName:u.a.activeLink,children:" Profile"})}),Object(n.jsx)("div",{className:"".concat(u.a.item," ").concat(u.a.active),children:Object(n.jsx)(l.b,{to:"/dialogs",activeClassName:u.a.activeLink,children:" Messages"})}),Object(n.jsx)("div",{className:"".concat(u.a.item," ").concat(u.a.active),children:Object(n.jsx)(l.b,{to:"/users",activeClassName:u.a.activeLink,children:" Users"})}),Object(n.jsx)("div",{className:"".concat(u.a.item," ").concat(u.a.active),children:Object(n.jsx)(l.b,{to:"/news",activeClassName:u.a.activeLink,children:" News"})}),Object(n.jsx)("div",{className:"".concat(u.a.item," ").concat(u.a.active),children:Object(n.jsx)(l.b,{to:"/music",activeClassName:u.a.activeLink,children:" Music"})}),Object(n.jsx)("div",{className:"".concat(u.a.item," ").concat(u.a.active),children:Object(n.jsx)(l.b,{to:"/settings",activeClassName:u.a.activeLink,children:" Settings"})})]})},d=function(e){return Object(n.jsx)("div",{})},g=function(){return Object(n.jsx)("div",{})},b=function(e){return Object(n.jsx)("div",{})},p=s(4),h=s(16),O=s(2),f="UPDATE_NEW_MESSAGE_BODY",m="SEND_MESSAGE",x={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Viktor"},{id:3,name:"Sveta"},{id:4,name:"Andrew"},{id:5,name:"Sasha"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your It-kamasutra? "},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}],newMessageBody:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(O.a)(Object(O.a)({},e),{},{newMessageBody:t.body});case m:var s=e.newMessageBody;return Object(O.a)(Object(O.a)({},e),{},{newMessageBody:"",messages:[].concat(Object(h.a)(e.messages),[{id:6,message:s}])});default:return e}},P=s(19),_=s.n(P),w=function(e){var t="/dialogs/1"+e.id;return Object(n.jsx)("div",{className:_.a.dialog+" "+_.a.active,children:Object(n.jsx)(l.b,{to:t,children:e.name})})},y=function(e){return Object(n.jsx)("div",{className:"message",children:e.message})},C=function(e){var t=e.dialogsPage.dialogs.map((function(e){return Object(n.jsx)(w,{name:e.name,id:e.id})})),s=e.dialogsPage.messages.map((function(e){return Object(n.jsx)(y,{message:e.message},e.id)})),i=e.dialogsPage.newMessageBody;return e.isAuth?Object(n.jsxs)("div",{className:_.a.dialogs,children:[Object(n.jsx)("div",{className:_.a.dialogsItems,children:t}),Object(n.jsxs)("div",{className:"messages",children:[Object(n.jsx)("div",{children:s}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("textarea",{onChange:function(t){var s=t.currentTarget.value;e.updateNewMessageBody(s)},value:i,placeholder:"Enter your message"})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{onClick:function(){e.sendMessage()},children:"Send"})})]})]})]}):Object(n.jsx)(p.a,{to:"/login"})},N=s(8),k=s(43),I=function(e){return{isAuth:e.auth.isAuth}};function S(e){return Object(N.b)(I)((function(t){t.isAuth;var s=Object(k.a)(t,["isAuth"]);return t.isAuth?Object(n.jsx)(e,Object(O.a)({},s)):Object(n.jsx)(p.a,{to:"/login"})}))}var T=S(C),U=Object(N.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(){e({type:m})},updateNewMessageBody:function(t){e(function(e){return{type:f,body:e}}(t))}}}))(T),E=s(14),F=s(15),A=s(18),L=s(17),D=s(44),M=s.n(D).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"e08e1901-cb67-4f8e-968d-12deec271219"}}),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return M.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},R=function(e){return M.post("follow/".concat(e))},G=function(e){return M.get("profile/"+e)},z=function(){return M.get("auth/me")},W="FOLLOW",H="UNFOLLOW",Y="SET_USERS",J="SET_CURRENT_PAGE",q="SET_TOTAL_USERS_COUNT",X="TOGGLE_IS_FETCHING",Z={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},K=function(e){return{type:H,usersId:e}},V=function(e){return{type:Y,users:e}},Q=function(e){return{type:q,count:e}},$=function(e){return{type:X,isFetching:e}},ee=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.usersId?Object(O.a)(Object(O.a)({},e),{},{followed:!0}):e}))});case H:return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.usersId?Object(O.a)(Object(O.a)({},e),{},{followed:!1}):e}))});case Y:return Object(O.a)(Object(O.a)({},e),{},{users:t.users});case J:return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case q:return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.count});case X:return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(h.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},se=s(29),ne=s.n(se),ie=s.p+"static/media/390poHMbqew.5605775c.jpg",ce=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],i=1;i<=t;i++)s.push(i);return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:s.map((function(t){return Object(n.jsx)("span",{className:e.currentPage===t?ne.a.selectedPage:"",onClick:function(s){e.onPageChanged(t)},children:t})}))}),Object(n.jsx)("div",{children:e.users.map((function(t){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:Object(n.jsx)(l.b,{to:"./profile/"+t.id,children:Object(n.jsx)("img",{src:null!=t.photos.small?t.photos.small:ie,className:ne.a.userPhoto})})}),Object(n.jsx)("div",{children:t.followed?Object(n.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:"Unfollow"}):Object(n.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(n.jsxs)("span",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:t.fullName}),Object(n.jsx)("div",{children:t.status})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:"u.location.country"}),Object(n.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))})]})},ae=s.p+"static/media/Spin-1.4s-137px (1).509019ba.svg",re=function(e){return Object(n.jsx)("div",{style:{backgroundColor:"white"},children:Object(n.jsx)("img",{src:ae})})},oe=S(function(e){Object(A.a)(s,e);var t=Object(L.a)(s);function s(){var e;Object(E.a)(this,s);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onPageChanged=function(t){e.props.getUsers(t,e.props.pageSize)},e}return Object(F.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[this.props.isFetching?Object(n.jsx)(re,{}):null,Object(n.jsx)(ce,{onPageChanged:this.onPageChanged,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,isFetching:this.props.isFetching,totalUsersCount:this.props.totalUsersCount,followingInProgress:this.props.followingInProgress,follow:this.props.follow,unfollow:this.props.unfollow,setUsers:this.props.setUsers,setCurrentPage:this.props.setCurrentPage,setTotalUsersCount:this.props.setTotalUsersCount,toggleIsFetching:this.props.toggleIsFetching,toggleFollowingProgress:this.props.toggleFollowingProgress,getUsers:this.props.getUsers})]})}}]),s}(c.a.Component)),ue=Object(N.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,currentPage:e.usersPage.currentPage,totalUsersCount:e.usersPage.totalUsersCount,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress,isAuth:e.auth.isAuth}}),{follow:function(e){return function(t){t(ee(!0,e)),R(e).then((function(s){0==s.data.resultCode&&t({type:W,usersId:e}),t(ee(!1,e))}))}},unfollow:K,setCurrentPage:function(e){return{type:J,currentPage:e}},toggleFollowingProgress:ee,getUsers:function(e,t){return function(s){s($(!0)),B(e,t).then((function(e){s($(!1)),s(V(e.items)),s(Q(e.totalCount))}))}},setUsers:V,setTotalUsersCount:Q,toggleIsFetching:$})(oe),le=s(30),je=s.n(le),de=function(e){return e.profile?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:je.a.img,children:Object(n.jsx)("img",{src:"https://sun9-36.userapi.com/impg/HZnWrqzamma2_Yw7xcSD-8XXR_IZKSxjJp0WNQ/EYak3s-RlnY\r\n.jpg?size=1080x1079&quality=96&proxy=1&sign=8743d906f74b4baec37a9fb4f8481d8a&type=album"})}),Object(n.jsxs)("div",{className:je.a.descriptionBlock,children:[Object(n.jsx)("img",{src:e.profile.photos.large}),"ava + description"]})]}):Object(n.jsx)(re,{})},ge="ADD-POST",be="UPDATE_NEW_POST_TEXT",pe="SET_USER_PROFILE",he={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It is my first post",likesCount:11},{id:3,message:"Blabla",likesCount:11},{id:4,message:"Dada",likesCount:11}],newPostText:"",profile:null},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:var s={id:5,message:e.newPostText,likesCount:0};return Object(O.a)(Object(O.a)({},e),{},{posts:[].concat(Object(h.a)(e.posts),[s])});case be:return Object(O.a)(Object(O.a)({},e),{},{newPostText:t.newText});case pe:return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});default:return e}},fe=s(31),me=s.n(fe),xe=s(45),ve=s.n(xe),Pe=function(e){return Object(n.jsxs)("div",{className:ve.a.item,children:[Object(n.jsx)("img",{src:"https://sun9-35.userapi.com/impf/HLP5CRTKbRvZisagdIWhrAzNRGxoFve9ZFJwLQ/ezCvng_UZZM.jpg?size=864x1080&quality=96&sign=439b5cff05a0cf4601e2b7c9f7625386&type=album"}),e.message,Object(n.jsxs)("div",{children:[" ",Object(n.jsx)("span",{children:"like"})," ",e.likesCount]})]})},_e=function(e){var t=e.posts.map((function(e,t){return Object(n.jsx)(Pe,{message:e.message,likesCount:e.likesCount},t)}));return Object(n.jsxs)("div",{className:me.a.postsBlock,children:[Object(n.jsx)("h3",{children:" My posts "}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("textarea",{onChange:function(t){e.updateNewPostText(t.currentTarget.value)},value:e.newPostText})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{onClick:function(){e.addPost()},children:"Add post"})})]}),Object(n.jsx)("div",{className:me.a.posts,children:t})]})},we=Object(N.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),{addPost:function(){return{type:ge}},updateNewPostText:function(e){return{type:be,newText:e}}})(_e),ye=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(de,{profile:e.profile}),Object(n.jsx)(we,{})]})},Ce=S(function(e){Object(A.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(F.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId?Number(this.props.match.params.userId):void 0;e||(e=2),this.props.getUserProfile(e)}},{key:"render",value:function(){return Object(n.jsx)(ye,Object(O.a)(Object(O.a)({},this.props),{},{profile:this.props.profile}))}}]),s}(c.a.Component)),Ne=Object(p.f)(Ce),ke=Object(N.b)((function(e){return{profile:e.profilePage.profile}}),{getUserProfile:function(e){return function(t){G(e).then((function(e){var s;t((s=e.data,{type:pe,profile:s}))}))}}})(Ne),Ie=s(32),Se=s.n(Ie),Te=function(e){return Object(n.jsxs)("header",{className:Se.a.header,children:[Object(n.jsx)("img",{src:"https://sun9-44.userapi.com/impf/c856136/v856136281/a9770/7RBeaUJ9A98.jpg?size=767x767&quality=96&proxy=1&sign=265e2a0e0a64547c891841d58ef10c51&type=album"}),Object(n.jsx)("div",{className:Se.a.loginBlock,children:e.isAuth?e.login:Object(n.jsx)(l.b,{to:"/login",children:"Login"})})]})},Ue="SET_USER_DATA",Ee={userId:null,email:null,login:null,isAuth:!1},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(O.a)(Object(O.a)(Object(O.a)({},e),t.data),{},{isAuth:!0});default:return e}},Ae=function(e){Object(A.a)(s,e);var t=Object(L.a)(s);function s(){return Object(E.a)(this,s),t.apply(this,arguments)}return Object(F.a)(s,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return Object(n.jsx)(Te,{isAuth:this.props.isAuth,login:this.props.login})}}]),s}(c.a.Component),Le=Object(N.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getAuthUserData:function(){return function(e){z().then((function(e){if(0===e.data.resultCode){var t=e.data.data;t.id,t.email,t.login;1}}))}}})(Ae),De=function(e){return Object(n.jsx)("h1",{children:"Login"})},Me=function(e){return Object(n.jsx)(l.a,{children:Object(n.jsxs)("div",{className:"app-wrapper",children:[Object(n.jsx)(Le,{}),Object(n.jsx)(j,{}),Object(n.jsxs)("div",{className:"app-wrapper-content",children:[Object(n.jsx)(p.b,{path:"/dialogs",render:function(){return Object(n.jsx)(U,{})}}),Object(n.jsx)(p.b,{path:"/profile/:userId?",render:function(){return Object(n.jsx)(ke,{})}}),Object(n.jsx)(p.b,{path:"/users",render:function(){return Object(n.jsx)(ue,{})}}),Object(n.jsx)(p.b,{path:"/login",render:function(){return Object(n.jsx)(De,{})}}),Object(n.jsx)(p.b,{path:"/dialogs",render:function(){return Object(n.jsx)(d,{})}}),Object(n.jsx)(p.b,{path:"/profile",render:function(){return Object(n.jsx)(g,{})}}),Object(n.jsx)(p.b,{path:"/dialogs",render:function(){return Object(n.jsx)(b,{})}})]})]})})},Be=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,78)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;s(e),n(e),i(e),c(e),a(e)}))},Re=s(20),Ge={},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return e},We=s(46),He=Object(Re.c)({profilePage:Oe,dialogsPage:v,sidebar:ze,usersPage:te,auth:Fe}),Ye=Object(Re.d)(He,Object(Re.a)(We.a));r.a.render(Object(n.jsx)(l.a,{children:Object(n.jsx)(N.a,{store:Ye,children:Object(n.jsx)(Me,{})})}),document.getElementById("root")),Be()}},[[77,1,2]]]);
//# sourceMappingURL=main.42fffccb.chunk.js.map