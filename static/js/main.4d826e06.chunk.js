(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{19:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__XUIay",dialogsItems:"Dialogs_dialogsItems__3HR55",active:"Dialogs_active__ICjGL",messages:"Dialogs_messages__36TXD",message:"Dialogs_message__2DeW4"}},29:function(e,t,s){e.exports={userPhoto:"users_userPhoto__2_u8Z",selectedPage:"users_selectedPage__3USs1"}},30:function(e,t,s){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__w7-vB"}},31:function(e,t,s){e.exports={postsBlock:"MyPosts_postsBlock__yxqJL",posts:"MyPosts_posts__2cETP"}},32:function(e,t,s){e.exports={header:"Header_header__3fFoF",loginBlock:"Header_loginBlock__1Wask"}},44:function(e,t,s){e.exports={content:"Post_content__3LncI",item:"Post_item__1awDx"}},5:function(e,t,s){e.exports={nav:"Navbar_nav__3SeaK",item:"Navbar_item__1VkP1",activeLink:"Navbar_activeLink__1NHh2"}},50:function(e,t,s){},51:function(e,t,s){},75:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(1),a=s.n(i),r=s(22),c=s.n(r),o=(s(50),s(51),s(5)),l=s.n(o),u=s(6),d=function(){return Object(n.jsxs)("nav",{className:l.a.nav,children:[Object(n.jsx)("div",{className:l.a.item,children:Object(n.jsx)(u.b,{to:"/profile",activeClassName:l.a.activeLink,children:" Profile"})}),Object(n.jsx)("div",{className:"".concat(l.a.item," ").concat(l.a.active),children:Object(n.jsx)(u.b,{to:"/dialogs",activeClassName:l.a.activeLink,children:" Messages"})}),Object(n.jsx)("div",{className:"".concat(l.a.item," ").concat(l.a.active),children:Object(n.jsx)(u.b,{to:"/users",activeClassName:l.a.activeLink,children:" Users"})}),Object(n.jsx)("div",{className:"".concat(l.a.item," ").concat(l.a.active),children:Object(n.jsx)(u.b,{to:"/news",activeClassName:l.a.activeLink,children:" News"})}),Object(n.jsx)("div",{className:"".concat(l.a.item," ").concat(l.a.active),children:Object(n.jsx)(u.b,{to:"/music",activeClassName:l.a.activeLink,children:" Music"})}),Object(n.jsx)("div",{className:"".concat(l.a.item," ").concat(l.a.active),children:Object(n.jsx)(u.b,{to:"/settings",activeClassName:l.a.activeLink,children:" Settings"})})]})},j=function(e){return Object(n.jsx)("div",{})},g=function(){return Object(n.jsx)("div",{})},p=function(e){return Object(n.jsx)("div",{})},h=s(4),b=s(16),O=s(2),f="UPDATE_NEW_MESSAGE_BODY",m="SEND_MESSAGE",x={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Viktor"},{id:3,name:"Sveta"},{id:4,name:"Andrew"},{id:5,name:"Sasha"},{id:6,name:"Valera"}],messages:[{id:1,message:"Hi"},{id:2,message:"How is your It-kamasutra? "},{id:3,message:"Yo"},{id:4,message:"Yo"},{id:5,message:"Yo"}],newMessageBody:""},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(O.a)(Object(O.a)({},e),{},{newMessageBody:t.body});case m:var s=e.newMessageBody;return Object(O.a)(Object(O.a)({},e),{},{newMessageBody:"",messages:[].concat(Object(b.a)(e.messages),[{id:6,message:s}])});default:return e}},P=s(19),_=s.n(P),w=function(e){var t="/dialogs/1"+e.id;return Object(n.jsx)("div",{className:_.a.dialog+" "+_.a.active,children:Object(n.jsx)(u.b,{to:t,children:e.name})})},C=function(e){return Object(n.jsx)("div",{className:"message",children:e.message})},y=function(e){e.dialogsPage;var t=e.dialogsPage.dialogs.map((function(e){return Object(n.jsx)(w,{name:e.name,id:e.id})})),s=e.dialogsPage.messages.map((function(e){return Object(n.jsx)(C,{message:e.message},e.id)})),i=e.dialogsPage.newMessageBody;return Object(n.jsxs)("div",{className:_.a.dialogs,children:[Object(n.jsx)("div",{className:_.a.dialogsItems,children:t}),Object(n.jsxs)("div",{className:"messages",children:[Object(n.jsx)("div",{children:s}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("textarea",{onChange:function(t){var s=t.currentTarget.value;e.updateNewMessageBody(s)},value:i,placeholder:"Enter your message"})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{onClick:function(){e.sendMessage()},children:"Send"})})]})]})]})},I=s(11),N=Object(I.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(){e({type:m})},updateNewMessageBody:function(t){e(function(e){return{type:f,body:e}}(t))}}}))(y),k=s(14),S=s(15),F=s(18),T=s(17),U="FOLLOW",E="UNFOLLOW",L="SET_USERS",A="SET_CURRENT_PAGE",D="SET_TOTAL_USERS_COUNT",B="TOGGLE_IS_FETCHING",M={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.usersId?Object(O.a)(Object(O.a)({},e),{},{followed:!0}):e}))});case E:return Object(O.a)(Object(O.a)({},e),{},{users:e.users.map((function(e){return e.id===t.usersId?Object(O.a)(Object(O.a)({},e),{},{followed:!1}):e}))});case L:return Object(O.a)(Object(O.a)({},e),{},{users:t.users});case A:return Object(O.a)(Object(O.a)({},e),{},{currentPage:t.currentPage});case D:return Object(O.a)(Object(O.a)({},e),{},{totalUsersCount:t.count});case B:return Object(O.a)(Object(O.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(O.a)(Object(O.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(b.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},G=s(29),z=s.n(G),H=s.p+"static/media/390poHMbqew.5605775c.jpg",W=s(43),Y=s.n(W).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"e08e1901-cb67-4f8e-968d-12deec271219"}}),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Y.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},q=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],i=1;i<=t;i++)s.push(i);return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:s.map((function(t){return Object(n.jsx)("span",{className:e.currentPage===t?z.a.selectedPage:"",onClick:function(s){e.onPageChanged(t)},children:t})}))}),Object(n.jsx)("div",{children:e.users.map((function(t){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:Object(n.jsx)(u.b,{to:"./profile/"+t.id,children:Object(n.jsx)("img",{src:null!=t.photos.small?t.photos.small:H,className:z.a.userPhoto})})}),Object(n.jsx)("div",{children:t.followed?Object(n.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){return e.toggleFollowingProgress(!0,t.id),Y.delete("follow/".concat(t.id),{withCredentials:!0,headers:{"API-KEY":"e08e1901-cb67-4f8e-968d-12deec271219"}}).then((function(s){0==s.data.resultCode&&e.unfollow(t.id),e.toggleFollowingProgress(!1,t.id)}))},children:"Unfollow"}):Object(n.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleFollowingProgress(!0,t.id),Y.post("follow/".concat(t.id),{},{withCredentials:!0}).then((function(s){0==s.data.resultCode&&e.follow(t.id),e.toggleFollowingProgress(!1,t.id)}))},children:"Follow"})})]}),Object(n.jsxs)("span",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:t.fullName}),Object(n.jsx)("div",{children:t.status})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:"u.location.country"}),Object(n.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))})]})},J=s.p+"static/media/Spin-1.4s-137px (1).509019ba.svg",K=function(e){return Object(n.jsx)("div",{style:{backgroundColor:"white"},children:Object(n.jsx)("img",{src:J})})},X=function(e){Object(F.a)(s,e);var t=Object(T.a)(s);function s(){var e;Object(k.a)(this,s);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.toggleIsFetching(!0),Z(t,e.props.pageSize).then((function(t){e.props.toggleIsFetching(!0),e.props.setUsers(t.items)}))},e}return Object(S.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.toggleIsFetching(!0),Z(this.props.currentPage,this.props.pageSize).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount)}))}},{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[this.props.isFetching?Object(n.jsx)(K,{}):null,Object(n.jsx)(q,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,setCurrentPage:this.props.setCurrentPage,setTotalUsersCount:this.props.setTotalUsersCount,setUsers:this.props.setUsers,isFetching:this.props.isFetching,toggleIsFetching:this.props.toggleIsFetching,followingInProgress:this.props.followingInProgress,toggleFollowingProgress:this.props.toggleFollowingProgress})]})}}]),s}(a.a.Component),V=Object(I.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:function(e){return{type:U,usersId:e}},unfollow:function(e){return{type:E,usersId:e}},setUsers:function(e){return{type:L,users:e}},setCurrentPage:function(e){return{type:A,currentPage:e}},setTotalUsersCount:function(e){return{type:D,count:e}},toggleIsFetching:function(e){return{type:B,isFetching:e}},toggleFollowingProgress:function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}}})(X),Q=s(30),$=s.n(Q),ee=function(e){return e.profile?Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:$.a.img,children:Object(n.jsx)("img",{src:"https://sun9-36.userapi.com/impg/HZnWrqzamma2_Yw7xcSD-8XXR_IZKSxjJp0WNQ/EYak3s-RlnY\r\n.jpg?size=1080x1079&quality=96&proxy=1&sign=8743d906f74b4baec37a9fb4f8481d8a&type=album"})}),Object(n.jsxs)("div",{className:$.a.descriptionBlock,children:[Object(n.jsx)("img",{src:e.profile.photos.large}),"ava + description"]})]}):Object(n.jsx)(K,{})},te="ADD-POST",se="UPDATE_NEW_POST_TEXT",ne="SET_USER_PROFILE",ie={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It is my first post",likesCount:11},{id:3,message:"Blabla",likesCount:11},{id:4,message:"Dada",likesCount:11}],newPostText:"",profile:null},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:var s={id:5,message:e.newPostText,likesCount:0};return Object(O.a)(Object(O.a)({},e),{},{posts:[].concat(Object(b.a)(e.posts),[s])});case se:return Object(O.a)(Object(O.a)({},e),{},{newPostText:t.newText});case ne:return Object(O.a)(Object(O.a)({},e),{},{profile:t.profile});default:return e}},re=s(31),ce=s.n(re),oe=s(44),le=s.n(oe),ue=function(e){return Object(n.jsxs)("div",{className:le.a.item,children:[Object(n.jsx)("img",{src:"https://sun9-35.userapi.com/impf/HLP5CRTKbRvZisagdIWhrAzNRGxoFve9ZFJwLQ/ezCvng_UZZM.jpg?size=864x1080&quality=96&sign=439b5cff05a0cf4601e2b7c9f7625386&type=album"}),e.message,Object(n.jsxs)("div",{children:[" ",Object(n.jsx)("span",{children:"like"})," ",e.likesCount]})]})},de=function(e){var t=e.posts.map((function(e,t){return Object(n.jsx)(ue,{message:e.message,likesCount:e.likesCount},t)}));return Object(n.jsxs)("div",{className:ce.a.postsBlock,children:[Object(n.jsx)("h3",{children:" My posts "}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("textarea",{onChange:function(t){e.updateNewPostText(t.currentTarget.value)},value:e.newPostText})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{onClick:function(){e.addPost()},children:"Add post"})})]}),Object(n.jsx)("div",{className:ce.a.posts,children:t})]})},je=Object(I.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),{addPost:function(){return{type:te}},updateNewPostText:function(e){return{type:se,newText:e}}})(de),ge=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(ee,{profile:e.profile}),Object(n.jsx)(je,{})]})},pe=function(e){Object(F.a)(s,e);var t=Object(T.a)(s);function s(){return Object(k.a)(this,s),t.apply(this,arguments)}return Object(S.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId?Number(this.props.match.params.userId):void 0;t||(t=2),Y.get("profile/"+t).then((function(t){e.props.setUserProfile(t.data)}))}},{key:"render",value:function(){return Object(n.jsx)(ge,Object(O.a)(Object(O.a)({},this.props),{},{profile:this.props.profile}))}}]),s}(a.a.Component),he=Object(h.e)(pe),be=Object(I.b)((function(e){return{profile:e.profilePage.profile}}),{setUserProfile:function(e){return{type:ne,profile:e}}})(he),Oe=s(32),fe=s.n(Oe),me=function(e){return Object(n.jsxs)("header",{className:fe.a.header,children:[Object(n.jsx)("img",{src:"https://sun9-44.userapi.com/impf/c856136/v856136281/a9770/7RBeaUJ9A98.jpg?size=767x767&quality=96&proxy=1&sign=265e2a0e0a64547c891841d58ef10c51&type=album"}),Object(n.jsx)("div",{className:fe.a.loginBlock,children:e.isAuth?e.login:Object(n.jsx)(u.b,{to:"/login",children:"Login"})})]})},xe="SET_USER_DATA",ve={userId:null,email:null,login:null,isAuth:!1},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(O.a)(Object(O.a)(Object(O.a)({},e),t.data),{},{isAuth:!0});default:return e}},_e=function(e){Object(F.a)(s,e);var t=Object(T.a)(s);function s(){return Object(k.a)(this,s),t.apply(this,arguments)}return Object(S.a)(s,[{key:"componentDidMount",value:function(){var e=this;Y.get("auth/me",{withCredentials:!0}).then((function(t){if(0===t.data.resultCode){var s=t.data.data,n=s.id,i=s.email,a=s.login;e.props.setAuthUserData(n,i,a,!0)}}))}},{key:"render",value:function(){return Object(n.jsx)(me,{setAuthUserData:this.props.setAuthUserData,isAuth:this.props.isAuth,login:this.props.login})}}]),s}(a.a.Component),we=Object(I.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e,t,s,n){return{type:xe,data:{usersId:e,email:t,login:s,isAuth:n}}}})(_e),Ce=function(e){return Object(n.jsx)(u.a,{children:Object(n.jsxs)("div",{className:"app-wrapper",children:[Object(n.jsx)(we,{}),Object(n.jsx)(d,{}),Object(n.jsxs)("div",{className:"app-wrapper-content",children:[Object(n.jsx)(h.a,{path:"/dialogs",render:function(){return Object(n.jsx)(N,{})}}),Object(n.jsx)(h.a,{path:"/profile/:userId?",render:function(){return Object(n.jsx)(be,{})}}),Object(n.jsx)(h.a,{path:"/users",render:function(){return Object(n.jsx)(V,{})}}),Object(n.jsx)(h.a,{path:"/dialogs",render:function(){return Object(n.jsx)(j,{})}}),Object(n.jsx)(h.a,{path:"/profile",render:function(){return Object(n.jsx)(g,{})}}),Object(n.jsx)(h.a,{path:"/dialogs",render:function(){return Object(n.jsx)(p,{})}})]})]})})},ye=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,76)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),i(e),a(e),r(e)}))},Ie=s(21),Ne={},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;return e},Se=Object(Ie.b)({profilePage:ae,dialogsPage:v,sidebar:ke,usersPage:R,auth:Pe}),Fe=Object(Ie.c)(Se);c.a.render(Object(n.jsx)(u.a,{children:Object(n.jsx)(I.a,{store:Fe,children:Object(n.jsx)(Ce,{})})}),document.getElementById("root")),ye()}},[[75,1,2]]]);
//# sourceMappingURL=main.4d826e06.chunk.js.map