(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[6],{379:function(e,n,t){e.exports={btn:"ChatPage_btn__h227e"}},382:function(e,n,t){"use strict";t.r(n),t.d(n,"Chat",(function(){return a})),t.d(n,"Messages",(function(){return l})),t.d(n,"Message",(function(){return d})),t.d(n,"AddMessageForm",(function(){return j}));var c=t(108),s=t(151),r=t(1),i=t(0),o=t(379),u=t.n(o),a=function(){var e=Object(i.useState)(null),n=Object(s.a)(e,2),t=n[0],c=n[1];return Object(i.useEffect)((function(){var e,n=function(){console.log("CLOSE WS"),setTimeout(t,3e3)};function t(){var t,s;null===(t=e)||void 0===t||t.removeEventListener("close",n),null===(s=e)||void 0===s||s.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx\n")).addEventListener("close",n),c(e)}return t(),function(){e.removeEventListener("close",n),e.close()}}),[]),Object(i.useEffect)((function(){null===t||void 0===t||t.addEventListener("close",(function(){console.log("CLOSE WS")}))}),[t]),Object(r.jsxs)("div",{children:[Object(r.jsx)(l,{wsChannel:t}),Object(r.jsx)(j,{wsChannel:t})]})},l=function(e){var n=e.wsChannel,t=Object(i.useState)([]),o=Object(s.a)(t,2),u=o[0],a=o[1];return Object(i.useEffect)((function(){var e=function(e){var n=JSON.parse(e.data);a((function(e){return[].concat(Object(c.a)(e),Object(c.a)(n))}))};return null===n||void 0===n||n.addEventListener("message",e),function(){null===n||void 0===n||n.removeEventListener("message",e)}}),[n]),Object(r.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:u.map((function(e,n){return Object(r.jsx)(d,{message:e},n)}))})},d=function(e){var n=e.message;return Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{src:n.photo,style:{width:"30px"}}),Object(r.jsx)("b",{children:n.userName}),Object(r.jsx)("br",{}),n.message,Object(r.jsx)("hr",{})]})},j=function(e){var n=e.wsChannel,t=Object(i.useState)(""),c=Object(s.a)(t,2),o=c[0],a=c[1],l=Object(i.useState)("pending"),d=Object(s.a)(l,2),j=d[0],b=d[1];Object(i.useEffect)((function(){var e=function(){b("ready")};return null===n||void 0===n||n.addEventListener("open",e),function(){null===n||void 0===n||n.removeEventListener("open",e)}}),[n]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("textarea",{value:o,onChange:function(e){return a(e.currentTarget.value)}})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{className:u.a.btn,disabled:null===n||"ready"!==j,onClick:function(){o&&(null===n||void 0===n||n.send(o),a(""))},children:"Send"})})]})};n.default=function(){return Object(r.jsx)("div",{children:Object(r.jsx)(a,{})})}}}]);
//# sourceMappingURL=6.fa8d807d.chunk.js.map